import{A as L,B,C as T,D as w,E as W,F as x,G as g,H as O,I as X,J as Y,N as Z,P as ee,Q as te,R as U,U as N,V as _,X as ie,a as $,b as q,c as k,d as z,e as v,f as J,g as F,h as H,i as h,j as P,k as G,l as K,m as R,n as c,o as f,p as u,q as l,r as a,s as o,t as m,u as Q,v as b,w as C,x as D,y as s,z as d}from"./chunk-4R6MCSPB.js";var y=(()=>{let e=class e{constructor(i){this.http=i,this.apiUrl="https://restcountries.com/v3.1",this.cacheStore={byCapital:{term:"",countries:[]},byCountries:{term:"",countries:[]},byRegion:{region:"",countries:[]}},this.loadFromLocalStorage()}saveToLocalStorage(){localStorage.setItem("cacheStore",JSON.stringify(this.cacheStore))}loadFromLocalStorage(){localStorage.getItem("cacheStore")&&(this.cacheStore=JSON.parse(localStorage.getItem("cacheStore")))}getCountriesRequest(i){return this.http.get(i).pipe(k(n=>$([])))}searchCountryByAlphaCode(i){let n=`${this.apiUrl}/alpha/${i}`;return this.http.get(n).pipe(q(r=>r.length>0?r[0]:null),k(r=>$(null)))}searchCapital(i){let n=`${this.apiUrl}/capital/${i}`;return this.getCountriesRequest(n).pipe(v(r=>this.cacheStore.byCapital={term:i,countries:r}),v(()=>this.saveToLocalStorage()))}searchCountry(i){let n=`${this.apiUrl}/name/${i}`;return this.getCountriesRequest(n).pipe(v(r=>this.cacheStore.byCountries={term:i,countries:r}),v(()=>this.saveToLocalStorage()))}searchRegion(i){let n=`${this.apiUrl}/region/${i}`;return this.getCountriesRequest(n).pipe(v(r=>this.cacheStore.byRegion={region:i,countries:r}),v(()=>this.saveToLocalStorage()))}};e.\u0275fac=function(n){return new(n||e)(H(Y))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var me=t=>["/countries/by",t];function pe(t,e){t&1&&(a(0,"div",2),s(1,` No hay pa\xEDses que mostrar.
`),o())}function ue(t,e){if(t&1&&(a(0,"tr")(1,"td"),s(2),o(),a(3,"td"),s(4),o(),a(5,"td"),m(6,"img",5),o(),a(7,"td"),s(8),o(),a(9,"td"),s(10),o(),a(11,"td"),s(12),B(13,"number"),o(),a(14,"td")(15,"a",6),s(16," Info "),o()()()),t&2){let p=e.$implicit,i=e.index;c(2),d(" ",i+1," "),c(2),d(" ",p.flag," "),c(2),l("src",p.flags.svg,R),c(2),d(" ",p.name.common," "),c(2),d(" ",p.capital," "),c(2),d(" ",T(13,7,p.population)," "),c(3),l("routerLink",L(9,me,p.cca3))}}function de(t,e){if(t&1&&(a(0,"table",3)(1,"thead")(2,"tr")(3,"th"),s(4,"#"),o(),a(5,"th"),s(6,"Icon"),o(),a(7,"th"),s(8,"Bandera"),o(),a(9,"th"),s(10,"Nombre"),o(),a(11,"th"),s(12,"Capital"),o(),a(13,"th"),s(14,"Poblacion"),o(),m(15,"th"),o()(),a(16,"tbody"),u(17,ue,17,11,"tr",4),o()()),t&2){let p=C();c(17),l("ngForOf",p.countries)}}var E=(()=>{let e=class e{constructor(){this.countries=[]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=h({type:e,selectors:[["countries-country-table"]],inputs:{countries:"countries"},decls:3,vars:2,consts:[["table",""],["class","alert alert-warning text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-warning","text-center"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["alt","country.name.common",3,"src"],[3,"routerLink"]],template:function(n,r){if(n&1&&u(0,pe,2,0,"div",1)(1,de,18,1,"ng-template",null,0,w),n&2){let I=D(2);l("ngIf",r.countries.length===0)("ngIfElse",I)}},dependencies:[x,g,te,O],styles:["img[_ngcontent-%COMP%]{width:25px}"]});let t=e;return t})();function fe(t,e){t&1&&m(0,"shared-loading-spinner")}var oe=(()=>{let e=class e{constructor(i){this.countriesService=i,this.countries=[],this.isLoading=!1,this.initialValue=""}ngOnInit(){this.countries=this.countriesService.cacheStore.byCapital.countries,this.initialValue=this.countriesService.cacheStore.byCapital.term}searchByCapital(i){this.isLoading=!0,this.countriesService.searchCapital(i).subscribe(n=>{this.countries=n,this.isLoading=!1})}};e.\u0275fac=function(n){return new(n||e)(f(y))},e.\u0275cmp=h({type:e,selectors:[["app-by-capital-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col"],["placeholder","Buscar por capital...",3,"onDebounce","initialValue"],[4,"ngIf"],[3,"countries"]],template:function(n,r){n&1&&(a(0,"h2"),s(1,"Por Capital"),o(),m(2,"hr"),a(3,"div",0)(4,"div",1)(5,"shared-search-box",2),b("onDebounce",function(V){return r.searchByCapital(V)}),o()()(),a(6,"div",0)(7,"div",1),m(8,"hr"),u(9,fe,1,0,"shared-loading-spinner",3),m(10,"countries-country-table",4),o()()),n&2&&(c(5),l("initialValue",r.initialValue),c(4),l("ngIf",r.isLoading),c(),l("countries",r.countries))},dependencies:[g,N,_,E]});let t=e;return t})();function ge(t,e){t&1&&m(0,"shared-loading-spinner")}var re=(()=>{let e=class e{constructor(i){this.countriesService=i,this.countries=[],this.isLoading=!1,this.initialValue=""}ngOnInit(){this.countries=this.countriesService.cacheStore.byCountries.countries,this.initialValue=this.countriesService.cacheStore.byCountries.term}searchByCountry(i){this.isLoading=!0,this.countriesService.searchCountry(i).subscribe(n=>{this.countries=n,this.isLoading=!1})}};e.\u0275fac=function(n){return new(n||e)(f(y))},e.\u0275cmp=h({type:e,selectors:[["app-by-country-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col"],["placeholder","Buscar por pa\xEDs...",3,"onDebounce","initialValue"],[4,"ngIf"],[3,"countries"]],template:function(n,r){n&1&&(a(0,"h2"),s(1,"Por Pa\xEDses"),o(),m(2,"hr"),a(3,"div",0)(4,"div",1)(5,"shared-search-box",2),b("onDebounce",function(V){return r.searchByCountry(V)}),o()()(),a(6,"div",0)(7,"div",1),m(8,"hr"),u(9,ge,1,0,"shared-loading-spinner",3),m(10,"countries-country-table",4),o()()),n&2&&(c(5),l("initialValue",r.initialValue),c(4),l("ngIf",r.isLoading),c(),l("countries",r.countries))},dependencies:[g,N,_,E]});let t=e;return t})();var ye=t=>({"btn-outline-primary":t});function ve(t,e){if(t&1){let p=Q();a(0,"button",6),b("click",function(){let n=G(p).$implicit,r=C();return K(r.searchByRegion(n))}),s(1),o()}if(t&2){let p=e.$implicit,i=C();l("ngClass",L(2,ye,i.selectedRegion===p)),c(),d(" ",p," ")}}function Ce(t,e){t&1&&m(0,"shared-loading-spinner")}var ae=(()=>{let e=class e{constructor(i){this.countriesService=i,this.countries=[],this.regions=["Africa","Americas","Asia","Europe","Oceania"],this.isLoading=!1}ngOnInit(){this.countries=this.countriesService.cacheStore.byRegion.countries,this.selectedRegion=this.countriesService.cacheStore.byRegion.region}searchByRegion(i){this.selectedRegion=i,this.countriesService.searchRegion(i).subscribe(n=>{this.countries=n})}};e.\u0275fac=function(n){return new(n||e)(f(y))},e.\u0275cmp=h({type:e,selectors:[["app-by-region-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col","text-center"],["class","btn mx-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col"],[4,"ngIf"],[3,"countries"],[1,"btn","mx-2",3,"click","ngClass"]],template:function(n,r){n&1&&(a(0,"h2"),s(1,"Por Regi\xF3n"),o(),m(2,"hr"),a(3,"div",0)(4,"div",1),u(5,ve,2,4,"button",2),o()(),a(6,"div",0)(7,"div",3),m(8,"hr"),u(9,Ce,1,0,"shared-loading-spinner",4),m(10,"countries-country-table",5),o()()),n&2&&(c(5),l("ngForOf",r.regions),c(4),l("ngIf",r.isLoading),c(),l("countries",r.countries))},dependencies:[W,x,g,_,E]});let t=e;return t})();function Se(t,e){t&1&&(a(0,"div",11),s(1," Espere por favor "),o())}function be(t,e){if(t&1&&(a(0,"div")(1,"div",2)(2,"div",12)(3,"h2"),s(4,"Pa\xEDs: "),a(5,"strong"),s(6),o()(),m(7,"hr"),o()()()),t&2){let p=C();c(6),d(" ",p.country.name.common," ")}}function xe(t,e){if(t&1&&(a(0,"span",13),s(1),o()),t&2){let p=e.$implicit;c(),d(" ",p.common," ")}}var se=(()=>{let e=class e{constructor(i,n,r){this.activatedRoute=i,this.countriesService=n,this.router=r}get translations(){return Object.values(this.country.translations)}ngOnInit(){this.activatedRoute.params.pipe(z(({id:i})=>this.countriesService.searchCountryByAlphaCode(i))).subscribe(i=>i?this.country=i:this.router.navigateByUrl(""))}};e.\u0275fac=function(n){return new(n||e)(f(Z),f(y),f(ee))},e.\u0275cmp=h({type:e,selectors:[["app-country-page"]],decls:29,vars:11,consts:[["loading",""],[4,"ngIf","ngIfElse"],[1,"row"],[1,"col-4"],[1,"img-thumbnail",3,"src","alt"],[1,"col"],[1,"list-group"],[1,"list-group-item"],[1,"row","mt-2"],[1,"d-flex","flex-wrap"],["class","badge bg-primary m-1",4,"ngFor","ngForOf"],[1,"alert","alert-info","text-center"],[1,"col-12"],[1,"badge","bg-primary","m-1"]],template:function(n,r){if(n&1&&(u(0,Se,2,0,"ng-template",null,0,w)(2,be,8,1,"div",1),a(3,"div",2)(4,"div",3)(5,"h3"),s(6,"Bandera"),o(),m(7,"img",4),o(),a(8,"div",5)(9,"h3"),s(10,"Informaci\xF3n"),o(),a(11,"ul",6)(12,"li",7)(13,"strong"),s(14,"Poblaci\xF3n"),o(),s(15),B(16,"number"),o()(),a(17,"ul",6)(18,"li",7)(19,"strong"),s(20,"C\xF3digo:"),o(),s(21),B(22,"number"),o()()()(),a(23,"div",8)(24,"div",5)(25,"h3"),s(26,"Traducciones"),o(),a(27,"div",9),u(28,xe,2,1,"span",10),o()()()),n&2){let I=D(1);c(2),l("ngIf",r.country)("ngIfElse",I),c(5),l("src",r.country==null||r.country.flags==null?null:r.country.flags.svg,R)("alt",r.country==null||r.country.name==null?null:r.country.name.common),c(8),d(" ",T(16,7,r.country==null?null:r.country.population),""),c(6),d(" ",T(22,9,r.country==null?null:r.country.ccn3),""),c(7),l("ngForOf",r.translations)}},dependencies:[x,g,O]});let t=e;return t})();var _e=[{path:"by-capital",component:oe},{path:"by-country",component:re},{path:"by-region",component:ae},{path:"by/:id",component:se},{path:"**",redirectTo:"by-capital"}],ce=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=P({type:e}),e.\u0275inj=F({imports:[U.forChild(_e),U]});let t=e;return t})();var We=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=P({type:e}),e.\u0275inj=F({imports:[X,ce,ie]});let t=e;return t})();export{We as CountriesModule};
